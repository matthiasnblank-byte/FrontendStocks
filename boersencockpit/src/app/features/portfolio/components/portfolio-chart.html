<section class="card flex h-full flex-col gap-4">
  <header class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
    <h2 class="text-lg font-semibold text-slate-900 dark:text-slate-100">Bewertungsverlauf</h2>
    <div class="flex flex-wrap gap-2" role="group" aria-label="Zeitraum auswählen">
      <button
        *ngFor="let key of ranges"
        type="button"
        class="btn btn-secondary"
        [class.btn-primary]="key === range"
        [attr.aria-pressed]="key === range"
        (click)="onRangeChange(key)"
      >
        {{ key }}
      </button>
    </div>
  </header>

  <div class="relative min-h-[18rem] flex-1">
    <ng-container *ngIf="loading; else chartContent">
      <div class="flex h-full items-center justify-center text-sm text-slate-500 dark:text-slate-400">
        <span class="animate-pulse">Daten werden geladen …</span>
      </div>
    </ng-container>
    <ng-template #chartContent>
      <ng-container *ngIf="series?.length; else emptyState">
        <canvas baseChart [data]="chartData" [options]="chartOptions" type="line"></canvas>
      </ng-container>
    </ng-template>
    <ng-template #emptyState>
      <div class="flex h-full items-center justify-center px-4 text-center text-sm text-slate-500 dark:text-slate-400">
        <p>Für den ausgewählten Zeitraum liegen noch keine ausreichenden Kursdaten vor.</p>
      </div>
    </ng-template>
  </div>
</section>
